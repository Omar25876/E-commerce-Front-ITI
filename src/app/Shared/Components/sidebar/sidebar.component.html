<!-- Filter Section -->
<div class="filter-section w-full max-w-xs mx-auto px-2 sm:px-0">

  <!-- Category Card -->
  <div class="card my-6 shadow-lg rounded-xl overflow-hidden w-full">
    <div class="bg-gradient-to-r from-sky-400 to-blue-600 flex flex-row py-2 px-4 justify-between items-center">
      <h3 class="text-2xl font-bold text-white">Category</h3>
      <button class="flex items-center w-10 h-10" (click)="iscategoryopen = !iscategoryopen">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" [attr.d]="iscategoryopen ? 'M5 15l7-7 7 7' : 'M19 9l-7 7-7-7'" />
        </svg>
      </button>
    </div>
    <div *ngIf="iscategoryopen" class="px-4 py-5">
      <div class="flex flex-wrap gap-4" *ngFor="let category of categories">
        <input type="checkbox" [checked]="categoryChecked(category)" (change)="OnCategoryChange(category, $event)">
        <h3>{{category.categoryName}}</h3>
      </div>
    </div>
  </div>

  <!-- Brand Card -->
  <div class="card my-6 shadow-lg rounded-xl overflow-hidden w-full">
    <div class="bg-gradient-to-r from-sky-400 to-blue-600 flex flex-row py-2 px-4 justify-between items-center">
      <h3 class="text-2xl font-bold text-white">Brand</h3>
      <button class="flex items-center w-10 h-10" (click)="isbrandopen = !isbrandopen">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" [attr.d]="isbrandopen ? 'M5 15l7-7 7 7' : 'M19 9l-7 7-7-7'" />
        </svg>
      </button>
    </div>
    <div *ngIf="isbrandopen" class="px-4 py-5">
      <div class="flex flex-wrap gap-4" *ngFor="let brand of brands">
        <input type="checkbox" [checked]="brandChecked(brand)" (change)="OnBrandChange(brand, $event)">
        <h3>{{brand.name}}</h3>
      </div>
    </div>
  </div>

  <!-- Rating Card -->
  <div class="card my-6 shadow-lg rounded-xl overflow-hidden w-full">
    <div class="bg-gradient-to-r from-sky-400 to-blue-600 flex flex-row py-2 px-4 justify-between items-center">
      <h3 class="text-2xl font-bold text-white">Rating</h3>
      <button class="flex items-center w-10 h-10" (click)="isratingopen = !isratingopen">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" [attr.d]="isratingopen ? 'M5 15l7-7 7 7' : 'M19 9l-7 7-7-7'" />
        </svg>
      </button>
    </div>
    <div *ngIf="isratingopen" class="px-4 py-5">
      <div class="flex flex-wrap gap-3 my-3" *ngFor="let star of Stars; let i = index">
        <input type="checkbox" (change)="onRatingChange(star, $event)" [checked]="selectedRatings.includes(star)">
        <ng-container *ngFor="let s of Stars">
          <svg width="20" height="20" viewBox="0 0 24 24" [attr.fill]="s <= star ? 'lightgreen' : '#D3D3D3'" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2L14.95 8.63L22 9.24L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.24L9.05 8.63L12 2Z" />
          </svg>
        </ng-container>
      </div>
    </div>
  </div>

  <!-- Price Card -->
  <div class="card my-6 shadow-lg rounded-xl overflow-hidden w-full mb-20">
    <div class="bg-gradient-to-r from-sky-400 to-blue-600 flex flex-row py-2 px-4 justify-between items-center">
      <h3 class="text-2xl font-bold text-white">Price</h3>
      <button class="flex items-center w-10 h-10" (click)="ispriceopen = !ispriceopen">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" [attr.d]="ispriceopen ? 'M5 15l7-7 7 7' : 'M19 9l-7 7-7-7'" />
        </svg>
      </button>
    </div>
    <div *ngIf="ispriceopen" class="px-4 py-5 flex flex-col sm:flex-row justify-center gap-4">
      <input min="0" class="outline-2 outline-black w-full sm:w-1/3 py-1 px-2 rounded" type="number" [(ngModel)]="minPrice" (ngModelChange)="onminPriceChange($event)" [ngClass]="{'input-error': errorprice}">
      <h3 class="font-extrabold fs-3 flex items-center">To</h3>
      <input min="0" class="outline-2 outline-black w-full sm:w-1/3 py-1 px-2 rounded" type="number" [(ngModel)]="maxPrice" (ngModelChange)="onmaxPriceChange($event)" [ngClass]="{'input-error': errorprice}">
      <button class="font-extrabold fs-3 text-sky-500 px-3 py-1 rounded bg-white shadow hover:bg-sky-100 transition" >Go</button>
    </div>
    <div *ngIf="errorprice" class="error-message text-red-700 mx-auto px-5 py-2">
      Max price should be greater than Min price
    </div>
  </div>
</div>
